def cashflow as decimal;

def function main(args as collection) as integer
{
	cashflow = 0;

        def a,b as collection;

        a = {	<"name",   "Jack">,
		<"balance", 100.00> };

        b = {	<"name",    "Rose">,
		<"balance",  0.00>  };

	def transferamount as integer;
	transferamount = 20.00;

	print "a=",a,", b=",b,", cashflow=",cashflow,NL;

	transaction(a, b, cashflow)
	{
		if(a["balance"] < transferamount)
		{
			rollback;
		}

		b["balance"] = b["balance"] + transferamount;
		cashflow = cashflow + transferamount;

		commit;
	}

	print "a=",a,", b=",b,", cashflow=",cashflow,NL;

        return 0;
}

