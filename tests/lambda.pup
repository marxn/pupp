def buildcounter = () : function
{
        def x = 0;
        return () using(&x): int {x = x + 1; return x;};
};

def i : int;
def counter : function;

counter = buildcounter();

for(i=0;i<1000;i=i+1)
{
        print counter(),NL;
}

return 0;

